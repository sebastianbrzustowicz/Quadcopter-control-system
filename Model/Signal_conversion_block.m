function output = Signal_conversion_block(input)
global roll pitch yaw F_min F_max
%F_alt = input(1);
%U1 = F_alt/(cosd(roll)*cosd(pitch));
U1 = input(1);
U2 = input(2);
U3 = input(3);
U4 = input(4);

F1 = (U1 - U2 + U3 + U4)/4;
F2 = (U1 - U2 - U3 - U4)/4;
F3 = (U1 + U2 - U3 + U4)/4;
F4 = (U1 + U2 + U3 - U4)/4;

%F1 = min(F_max, max(F_min, F1));
%F2 = min(F_max, max(F_min, F2));
%F3 = min(F_max, max(F_min, F3));
%F4 = min(F_max, max(F_min, F4));

PWM1 = (2882303761517117440000*((3101230296644654889*F1)/1441151880758558720000 + 3651921/16000000)^(1/2))/3101230296644654889 + 44210504476406462360/79518725554991151;
PWM2 = (2882303761517117440000*((3101230296644654889*F2)/1441151880758558720000 + 3651921/16000000)^(1/2))/3101230296644654889 + 44210504476406462360/79518725554991151;
PWM3 = (2882303761517117440000*((3101230296644654889*F3)/1441151880758558720000 + 3651921/16000000)^(1/2))/3101230296644654889 + 44210504476406462360/79518725554991151;
PWM4 = (2882303761517117440000*((3101230296644654889*F4)/1441151880758558720000 + 3651921/16000000)^(1/2))/3101230296644654889 + 44210504476406462360/79518725554991151;

output = [PWM1; PWM2; PWM3; PWM4];
end